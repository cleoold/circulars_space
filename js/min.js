"use strict";var pBody=document.querySelector("body"),pHtml=document.querySelector("html"),bgChangeFlag=-1;(function(){var a=["#30542c","#232170","#530a80","#870c6d","#873a0b"],b=0;bgChangeFlag=setTimeout(function c(){5==++b&&(b=0),pBody.style.backgroundColor=a[b],pHtml.style.backgroundColor=a[b],bgChangeFlag&&(bgChangeFlag=setTimeout(c,5e3))},5e3)})(),document.querySelector(".cancel-bg-change").addEventListener("click",function a(){document.querySelector(".cancel-bg-change").removeEventListener("click",a),clearTimeout(bgChangeFlag),bgChangeFlag=null}),document.querySelector(".cancel-bg-change-and-enable-star").addEventListener("click",function a(){document.querySelector(".cancel-bg-change-and-enable-star").removeEventListener("click",a),clearTimeout(bgChangeFlag),bgChangeFlag=null,pBody.style.backgroundColor="unset",pHtml.style.backgroundColor="unset",pHtml.style.background="url(\"./assets/bg.jpg\")",pHtml.style.backgroundPosition="center center",pHtml.style.backgroundAttachment="fixed",document.querySelector("#container").style.backgroundColor="unset",document.querySelector("#container").style.overflow="unset";var b=["1px 1px 15px 6px rgba(255,144,61,.89)","1px 1px 15px 6px rgba(255,100,61,.93)","1px 1px 15px 6px rgba(255,88,61,.89)","1px 1px 15px 6px rgba(255,88,61,.5)","1px 1px 15px 6px rgba(255,100,61,.89)","1px 1px 15px 6px rgba(255,144,61,.77)"],c=0,d=document.querySelector("#origin");d.style.background="radial-gradient( rgb(255,208,0) 1%, rgb(255,151,0) 39%, rgb(249,183,0) 39%, rgb(223,77,23) 100%)",d.style.width="8px",d.style.height="8px",setTimeout(function a(){6==++c&&(c=0),d.style.boxShadow=b[c],d.style.WebkitBoxShadow=b[c],setTimeout(a,4e3)},0)});var container=document.querySelector("div#container"),containerWidthText=document.querySelector(".container-width"),origin=document.querySelector("div#origin"),containerLength=0;function floatToPx(a){return a+""+"px"}function parseFloat200(a){var b=parseFloat(a);return isNaN(b)?1/0:b}function wrongInput(a){var b=a.style.backgroundColor;a.style.backgroundColor="#c98d8d",setTimeout(function(){a.style.backgroundColor=b},400)}function onChangeContainerSize(){containerLength=parseFloat(window.getComputedStyle(container).width);var a=floatToPx(containerLength);container.style.height=a,containerWidthText.value=a,origin.style.left=floatToPx(parseFloat(window.getComputedStyle(container).width)/2-3.6),origin.style.top=floatToPx(parseFloat(window.getComputedStyle(container).height)/2-3.5)}onChangeContainerSize(),window.addEventListener("resize",onChangeContainerSize);function degToRadian(a){return Math.PI*a/180}function radianToDeg(a){return 180*a/Math.PI}function rotateX(a,b,c){return Math.cos(c)*a-Math.sin(c)*b}function rotateY(a,b,c){return Math.sin(c)*a+Math.cos(c)*b}function Block(){var a=this,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,e=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0,f=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0;this.offset=b,this.initPeriod=c,this.initSemiX=d,this.initSemiY=e,this.initRotate=f,this.period=function(){return a.initPeriod},this.omega=function(b){return 2*Math.PI/a.period(b)},this.semiX=function(){return a.initSemiX},this.semiY=function(){return a.initSemiY},this.rotate=function(){return a.initRotate},this.yieldX=function(b){return a.semiX(b)*Math.cos(a.omega(b)*b-a.offset)},this.yieldY=function(b){return a.semiY(b)*Math.sin(a.omega(b)*b-a.offset)},this.yieldRotated=function(b){var c=a.yieldX(b),d=a.yieldY(b),e=a.rotate(b),f=degToRadian(e);return{x:rotateX(c,d,f),y:rotateY(c,d,f),rx:a.semiX(b),ry:a.semiY(b),rad:f,deg:e}}}var intervals=40;function BlockInMotion(a){function b(){var a=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];G=0,F=containerLength/2,t.value=15,u.value=5,w.value=F/2,x.value=F/2,v.value=0,y.value=0,z.value=0,A.value=0,B.value=0,C.value="origin",I=!1,m.style.left="49.1%",m.style.top="48.9%",m.style.width="15px",m.style.height="15px",p.style.left="49.1%",n.style.width="0px",n.style.height="0px",n.style.left="0px",n.style.top="0px",n.style.borderColor="rgba(255,255,255,.18) !important",a&&(s.value="yellow",D.style.backgroundColor="yellow",m.style.backgroundColor="yellow",p.style.backgroundColor="yellow"),H=null}function d(a,b){return a<-containerLength||a>2*containerLength||b<-containerLength||b>2*containerLength}function f(a,b,c){return 0>a||a>containerLength-c||0>b||b>containerLength-1.1*c}function g(){G+=intervals;var a=G/1e3,b=parseFloat(m.style.width),e=F-b/2,f=l.yieldRotated(a),i=f.x+e,j=f.y+e,k=0,n=0;if(I){var o=f.rad;if(Math.abs(f.rx)>=Math.abs(f.ry)){var s=Math.sqrt(f.rx**2-f.ry**2);k=s*Math.cos(o),n=s*Math.sin(o)}else{var c=Math.sqrt(f.ry**2-f.rx**2);k=c*Math.sin(-o),n=c*Math.cos(o)}i+=k,j+=n}return d(i,j,b)?(l.initSemiX=F,l.SemiX=function(){return l.initSemiX},l.initSemiY=F,l.SemiY=function(){return l.initSemiY},l.initPeriod=0,l.period=function(){return l.initPeriod},l.rotate=function(){return l.initRotate},z.value=0,A.value=0,u.value=0,q.value="stopped",void(r.value="stopped")):void(m.style.left=floatToPx(i),q.value=floatToPx(i),m.style.top=floatToPx(j),r.value=floatToPx(j),p.style.left=floatToPx(i),h(f.rx,f.ry,f.deg,k,n),H=setTimeout(g,intervals))}function h(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0,e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0;a=Math.abs(a),b=Math.abs(b),n.style.width=floatToPx(2*a),n.style.height=floatToPx(2*b);var f=parseFloat(window.getComputedStyle(container).width)/2;n.style.left=floatToPx(f-a+d),n.style.top=floatToPx(f-b+e),n.style.transform="rotate(".concat(c,"deg)"),n.style.WebkitTransform="rotate(".concat(c,"deg)")}function i(a){a=a||window.event,a.preventDefault(),K=(a.clientX||a.touches[0].clientX)-m.offsetLeft,L=(a.clientY||a.touches[0].clientY)-m.offsetTop,J=!0}function j(a){if(J){a=a||window.event,a.preventDefault();var b=parseFloat(m.style.width),c=(a.clientX||a.touches[0].clientX)-K,d=(a.clientY||a.touches[0].clientY)-L;if(f(c,d,b))return;m.style.left=floatToPx(c),m.style.top=floatToPx(d),q.value=c,r.value=d,p.style.left=floatToPx(c);var g=c-parseFloat(origin.style.left),i=d-parseFloat(origin.style.top),j=Math.sqrt(g**2+i**2);w.value=j,x.value=j,l.offset=-Math.atan2(i,g),h(j,j,0)}}function k(){J=!1,K=0,L=0}var l=new Block,m=document.querySelector("div#moving-obj-".concat(a)),n=document.querySelector("div#moving-obj-trajectory-".concat(a)),p=document.querySelector("div#moving-obj-prj-".concat(a)),q=document.querySelector("#info-container-".concat(a," .box-x")),r=document.querySelector("#info-container-".concat(a," .box-y")),s=document.querySelector("#info-container-".concat(a," .set-color")),t=document.querySelector("#info-container-".concat(a," .set-size")),u=document.querySelector("#info-container-".concat(a," .set-period")),v=document.querySelector("#info-container-".concat(a," .set-angle")),w=document.querySelector("#info-container-".concat(a," .set-semi-X-axis")),x=document.querySelector("#info-container-".concat(a," .set-semi-Y-axis")),y=document.querySelector("#info-container-".concat(a," .set-period-change")),z=document.querySelector("#info-container-".concat(a," .set-semi-X-axis-change")),A=document.querySelector("#info-container-".concat(a," .set-semi-Y-axis-change")),B=document.querySelector("#info-container-".concat(a," .set-angle-change")),C=document.querySelector("#info-container-".concat(a," .set-rotate-around")),D=document.querySelector("#info-container-".concat(a," .set-attr-go")),E=document.querySelector("#info-container-".concat(a," .set-attr-reset")),F=0,G=0,H=null,I=!1,J=!1,K=0,L=0;b(),window.addEventListener("resize",function(){F=containerLength/2,l.initSemiX>F&&(l.initSemiX=F),l.initSemiY>F&&(l.initSemiY=F);"ontouchstart"in document.documentElement||(w.value=l.initSemiX,x.value=l.initSemiY)}),u.addEventListener("click",function(){u.value=l.period(G/1e3)}),w.addEventListener("click",function(){w.value=l.semiX(G/1e3)}),x.addEventListener("click",function(){x.value=l.semiY(G/1e3)}),v.addEventListener("click",function(){v.value=l.rotate(G/1e3)}),C.addEventListener("change",function(){var a=C.value;I="origin"!=a}),D.addEventListener("click",function(){var a=parseFloat(t.value);if(30>=a&&5<=a)D.style.backgroundColor=s.value,m.style.backgroundColor=s.value,m.style.width=floatToPx(a),m.style.height=floatToPx(a),p.style.backgroundColor=s.value;else return void wrongInput(t);var b=isNaN(parseFloat(u.value)),c=isNaN(parseFloat(v.value))||360<Math.abs(parseFloat(v.value)),d=Math.abs(parseFloat200(w.value))>F,e=Math.abs(parseFloat200(x.value))>F;if(!d&&!e&&!b&&!c)l.initPeriod=parseFloat(u.value),l.initSemiX=parseFloat(w.value),l.initSemiY=parseFloat(x.value),l.initRotate=parseFloat(v.value),u.value=parseFloat(u.value),w.value=parseFloat(w.value),x.value=parseFloat(x.value),v.value=parseFloat(v.value);else return d&&wrongInput(w),e&&wrongInput(x),b&&wrongInput(u),void(c&&wrongInput(v));y.value||(y.value=0),z.value||(z.value=0),A.value||(A.value=0),B.value||(B.value=0);var f=isNaN(parseFloat(y.value)),h=isNaN(parseFloat(B.value))||360<Math.abs(parseFloat(B.value)),i=Math.abs(parseFloat200(z.value))>F,j=Math.abs(parseFloat200(A.value))>F;if(!i&&!j&&!f&&!h){var k=parseFloat(y.value);l.period=function(a){return l.initPeriod+a*k};var n=parseFloat(z.value);l.semiX=function(a){return l.initSemiX+a*n};var o=parseFloat(A.value);l.semiY=function(a){return l.initSemiY+a*o};var q=parseFloat(B.value);l.rotate=function(a){return l.initRotate+a*q},y.value=k,z.value=n,A.value=o,B.value=q}else return i&&wrongInput(z),j&&wrongInput(A),f&&wrongInput(y),void(h&&wrongInput(B));var r=G/1e3;clearTimeout(H),l.offset-=l.omega(r)*r,G=0,H=setTimeout(g,intervals),D.value="Change!"}),E.addEventListener("click",function(){clearTimeout(H),l=null,b(null,!1),l=new Block,D.value="Go!",q.value=null,r.value=null});"onmousedown"in document.documentElement&&(m.addEventListener("mousedown",i),container.addEventListener("mousemove",j),container.addEventListener("mouseup",k)),"ontouchstart"in document.documentElement&&(m.addEventListener("touchstart",i),container.addEventListener("touchmove",j),container.addEventListener("touchend",k)),this.cleanUp=function(){clearTimeout(H),l=null}}var setFpsText=document.querySelector(".shared-info-container-bo > span:nth-child(2)");document.querySelector(".shared-info-container-bo .fps-decrease").addEventListener("click",function(){var a=parseInt(setFpsText.innerText);return 5>=a?void(setFpsText.innerText=5):void(intervals=parseInt(1e3/a),setFpsText.innerText=a-(40<=a?10:5))}),document.querySelector(".shared-info-container-bo .fps-increase").addEventListener("click",function(){var a=parseInt(setFpsText.innerText);return 150<=a?void(setFpsText.innerText=150):void(intervals=parseInt(1e3/a),setFpsText.innerText=a+(40<=a?10:5))});var grandContainer=document.querySelector(".grand-container"),infoContainer1=document.querySelector("#info-container-1"),movingObj1=document.querySelector("#moving-obj-1"),movingObjTrajectory1=document.querySelector("#moving-obj-trajectory-1"),objManageNode=document.querySelector(".obj-manage"),movingObjProjection1=document.querySelector("#moving-obj-prj-1"),oneClickGoBtn=document.querySelector(".obj-manage .objs-oneclick-go"),oneClickResetBtn=document.querySelector(".obj-manage .objs-oneclick-reset"),oneClickBtnsSeparator=document.querySelector(".obj-manage br");oneClickGoBtn.style.display="none",oneClickResetBtn.style.display="none",oneClickBtnsSeparator.style.display="none";var prevObjSelect=[],nextObjSelect=[],nextBtnHandlers=[],circular1=new BlockInMotion(1),CircularsCount=1,Circulars=[];document.querySelector(".obj-manage .append-objs").addEventListener("click",function(){if(!(6<=CircularsCount)){++CircularsCount;var a=infoContainer1.cloneNode(!0);a.id="info-container-".concat(CircularsCount),a.children[0].children[1].innerText="Block ".concat(CircularsCount),a.style.display="none",grandContainer.insertBefore(a,container);var b=movingObj1.cloneNode(!0);b.id="moving-obj-".concat(CircularsCount),container.appendChild(b);var c=movingObjTrajectory1.cloneNode(!0);c.id="moving-obj-trajectory-".concat(CircularsCount),container.insertBefore(c,origin);var d=movingObjProjection1.cloneNode();d.id="moving-obj-prj-".concat(CircularsCount);var e=document.createElement("div");e.setAttribute("class","projections"),e.appendChild(d),grandContainer.insertBefore(e,objManageNode);var f=new BlockInMotion(CircularsCount);document.querySelector("#info-container-".concat(CircularsCount," .set-color")).value="rgba(".concat(Math.floor(256*Math.random()),",").concat(Math.floor(256*Math.random()),",").concat(Math.floor(256*Math.random()),",1)"),Circulars.push(f),2==CircularsCount&&(oneClickGoBtn.style.display="",oneClickResetBtn.style.display="",oneClickBtnsSeparator.style.display="");var g=CircularsCount;document.querySelector("#info-container-".concat(g," .switch-obj-prev")).addEventListener("click",function(){document.querySelector("#info-container-".concat(g)).style.display="none",document.querySelector("#info-container-".concat(g-1)).style.display="grid"}),nextBtnHandlers.push(function(){document.querySelector("#info-container-".concat(g-1)).style.display="none",document.querySelector("#info-container-".concat(g)).style.display="grid"}),document.querySelector("#info-container-".concat(g-1," .switch-obj-next")).addEventListener("click",nextBtnHandlers[g-2])}}),document.querySelector(".obj-manage .delete-objs").addEventListener("click",function(){if(!(1>=CircularsCount)){Circulars[Circulars.length-1].cleanUp(),Circulars.pop();var a=document.querySelector("#info-container-".concat(CircularsCount)),b=document.querySelector("#info-container-".concat(CircularsCount-1)),c="none"!=a.style.display;a.remove(),document.querySelector("#moving-obj-".concat(CircularsCount)).remove(),document.querySelector("#moving-obj-trajectory-".concat(CircularsCount)).remove(),document.querySelector("#moving-obj-prj-".concat(CircularsCount)).parentNode.remove(),document.querySelector("#info-container-".concat(CircularsCount-1," .switch-obj-next")).removeEventListener("click",nextBtnHandlers.pop()),c&&(b.style.display="grid"),1==--CircularsCount&&(oneClickGoBtn.style.display="none",oneClickResetBtn.style.display="none",oneClickBtnsSeparator.style.display="none")}}),document.querySelector(".obj-manage .objs-oneclick-go").addEventListener("click",function(){var a=document.querySelectorAll(".info-container .set-attr-go"),b=!0,c=!1,d=void 0;try{for(var e,f,g=a[Symbol.iterator]();!(b=(e=g.next()).done);b=!0)f=e.value,f.click()}catch(a){c=!0,d=a}finally{try{b||null==g.return||g.return()}finally{if(c)throw d}}}),document.querySelector(".obj-manage .objs-oneclick-reset").addEventListener("click",function(){var a=document.querySelectorAll(".info-container .set-attr-reset"),b=!0,c=!1,d=void 0;try{for(var e,f,g=a[Symbol.iterator]();!(b=(e=g.next()).done);b=!0)f=e.value,f.click()}catch(a){c=!0,d=a}finally{try{b||null==g.return||g.return()}finally{if(c)throw d}}});var samplesClickDisplay=document.querySelector(".samples-display > h5"),samplesShown=!1;samplesClickDisplay.addEventListener("click",function(){if(!samplesShown)for(var a=["./assets/uniformcircular1.gif","./assets/uniformcircular2.gif","./assets/uniformcircular3.gif","./assets/uniformcircular4.gif"],b=0,c=a;b<c.length;b++){var d=c[b],e=document.createElement("img");e.src=d,document.querySelector(".samples-display").appendChild(e)}else{var f=!0,g=!1,h=void 0;try{for(var i,j,k=document.querySelectorAll(".samples-display img")[Symbol.iterator]();!(f=(i=k.next()).done);f=!0)j=i.value,j.remove()}catch(a){g=!0,h=a}finally{try{f||null==k.return||k.return()}finally{if(g)throw h}}}samplesShown=!samplesShown});
