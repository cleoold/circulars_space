/* uniform circular motion demo! ()cleoold*/
const pBody=document.querySelector("body"),pHtml=document.querySelector("html");var bgChangeFlag=-1;(()=>{const a=["#30542c","#232170","#530a80","#870c6d","#873a0b"];let b=0;bgChangeFlag=setTimeout(function c(){5==++b&&(b=0),pBody.style.backgroundColor=a[b],pHtml.style.backgroundColor=a[b],bgChangeFlag&&(bgChangeFlag=setTimeout(c,5e3))},5e3)})(),document.querySelector(".cancel-bg-change").addEventListener("click",function a(){document.querySelector(".cancel-bg-change").removeEventListener("click",a),clearTimeout(bgChangeFlag),bgChangeFlag=null}),document.querySelector(".cancel-bg-change-and-enable-star").addEventListener("click",function a(){document.querySelector(".cancel-bg-change-and-enable-star").removeEventListener("click",a),clearTimeout(bgChangeFlag),bgChangeFlag=null,pBody.style.backgroundColor="unset",pHtml.style.backgroundColor="unset",pHtml.style.background="url(\"./assets/bg.jpg\")",pHtml.style.backgroundPosition="center center",pHtml.style.backgroundAttachment="fixed",document.querySelector("#container").style.backgroundColor="unset",document.querySelector("#container").style.overflow="unset";const b=["1px 1px 15px 6px rgba(255,144,61,.89)","1px 1px 15px 6px rgba(255,100,61,.93)","1px 1px 15px 6px rgba(255,88,61,.89)","1px 1px 15px 6px rgba(255,88,61,.5)","1px 1px 15px 6px rgba(255,100,61,.89)","1px 1px 15px 6px rgba(255,144,61,.77)"];let c=0;const d=document.querySelector("#origin");d.style.background="radial-gradient( rgb(255,208,0) 1%, rgb(255,151,0) 39%, rgb(249,183,0) 39%, rgb(223,77,23) 100%)",d.style.width="8px",d.style.height="8px",setTimeout(function a(){6==++c&&(c=0),d.style.boxShadow=b[c],d.style.WebkitBoxShadow=b[c],setTimeout(a,4e3)},0)});const container=document.querySelector("div#container"),containerWidthText=document.querySelector(".container-width"),origin=document.querySelector("div#origin");var containerLength=0;function floatToPx(a){return a+""+"px"}function parseFloat200(a){let b=parseFloat(a);return isNaN(b)?1/0:b}function wrongInput(a){let b=a.style.backgroundColor;a.style.backgroundColor="#c98d8d",setTimeout(()=>{a.style.backgroundColor=b},400)}function onChangeContainerSize(){containerLength=parseFloat(window.getComputedStyle(container).width);var a=floatToPx(containerLength);container.style.height=a,containerWidthText.value=a,origin.style.left=floatToPx(parseFloat(window.getComputedStyle(container).width)/2-3.6),origin.style.top=floatToPx(parseFloat(window.getComputedStyle(container).height)/2-3.5)}onChangeContainerSize(),window.addEventListener("resize",onChangeContainerSize);function degToRadian(a){return Math.PI*a/180}function radianToDeg(a){return 180*a/Math.PI}function rotateX(a,b,c){return Math.cos(c)*a-Math.sin(c)*b}function rotateY(a,b,c){return Math.sin(c)*a+Math.cos(c)*b}function Block(a=0,b=0,c=0,d=0,e=0){this.offset=a,this.initPeriod=b,this.initSemiX=c,this.initSemiY=d,this.initRotate=e,this.period=()=>this.initPeriod,this.omega=a=>2*Math.PI/this.period(a),this.semiX=()=>this.initSemiX,this.semiY=()=>this.initSemiY,this.rotate=()=>this.initRotate,this.yieldX=a=>this.semiX(a)*Math.cos(this.omega(a)*a-this.offset),this.yieldY=a=>this.semiY(a)*Math.sin(this.omega(a)*a-this.offset),this.yieldRotated=a=>{let b=this.yieldX(a),c=this.yieldY(a),d=this.rotate(a),e=degToRadian(d);return{x:rotateX(b,c,e),y:rotateY(b,c,e),rx:this.semiX(a),ry:this.semiY(a),rad:e,deg:d}}}var intervals=40;function BlockInMotion(a){function b(a,b=!0){G=0,F=containerLength/2,r.value=15,s.value=5,u.value=F/2,v.value=F/2,t.value=0,w.value=0,z.value=0,A.value=0,B.value=0,C.value="origin",I=!1,k.style.left="49.1%",k.style.top="48.9%",k.style.width="15px",k.style.height="15px",m.style.left="49.1%",l.style.width="0px",l.style.height="0px",l.style.left="0px",l.style.top="0px",l.style.borderColor="rgba(255,255,255,.18) !important",b&&(q.value="yellow",D.style.backgroundColor="yellow",k.style.backgroundColor="yellow",m.style.backgroundColor="yellow"),H=null}function c(a,b){return a<-containerLength||a>2*containerLength||b<-containerLength||b>2*containerLength}function d(a,b,c){return 0>a||a>containerLength-c||0>b||b>containerLength-1.1*c}function e(){G+=intervals;let a=G/1e3,b=parseFloat(k.style.width),d=F-b/2;const g=j.yieldRotated(a);let h=g.x+d,i=g.y+d;if(I){let a=g.rad;if(Math.abs(g.rx)>=Math.abs(g.ry)){let b=Math.sqrt(g.rx**2-g.ry**2);var l=b*Math.cos(a),o=b*Math.sin(a)}else{let b=Math.sqrt(g.ry**2-g.rx**2);var l=b*Math.sin(-a),o=b*Math.cos(a)}h+=l,i+=o}return c(h,i,b)?(j.initSemiX=F,j.SemiX=()=>j.initSemiX,j.initSemiY=F,j.SemiY=()=>j.initSemiY,j.initPeriod=0,j.period=()=>j.initPeriod,j.rotate=()=>j.initRotate,z.value=0,A.value=0,s.value=0,n.value="stopped",void(p.value="stopped")):void(k.style.left=floatToPx(h),n.value=floatToPx(h),k.style.top=floatToPx(i),p.value=floatToPx(i),m.style.left=floatToPx(h),f(g.rx,g.ry,g.deg),I&&f(g.rx,g.ry,g.deg,l,o),H=setTimeout(e,intervals))}function f(a,b,c,d=0,e=0){a=Math.abs(a),b=Math.abs(b),l.style.width=floatToPx(2*a),l.style.height=floatToPx(2*b);let f=parseFloat(window.getComputedStyle(container).width)/2;l.style.left=floatToPx(f-a+d),l.style.top=floatToPx(f-b+e),l.style.transform=`rotate(${c}deg)`,l.style.WebkitTransform=`rotate(${c}deg)`}function g(a){a=a||window.event,a.preventDefault(),K=(a.clientX||a.touches[0].clientX)-k.offsetLeft,L=(a.clientY||a.touches[0].clientY)-k.offsetTop,J=!0}function h(a){if(J){a=a||window.event,a.preventDefault();let b=parseFloat(k.style.width),c=(a.clientX||a.touches[0].clientX)-K,e=(a.clientY||a.touches[0].clientY)-L;if(d(c,e,b))return;k.style.left=floatToPx(c),k.style.top=floatToPx(e),n.value=c,p.value=e,m.style.left=floatToPx(c);let g=c-parseFloat(origin.style.left),h=e-parseFloat(origin.style.top),i=Math.sqrt(g**2+h**2);u.value=i,v.value=i,j.offset=-Math.atan2(h,g),f(i,i,0)}}function i(){J=!1,K=0,L=0}var j=new Block;const k=document.querySelector(`div#moving-obj-${a}`),l=document.querySelector(`div#moving-obj-trajectory-${a}`),m=document.querySelector(`div#moving-obj-prj-${a}`),n=document.querySelector(`#info-container-${a} .box-x`),p=document.querySelector(`#info-container-${a} .box-y`),q=document.querySelector(`#info-container-${a} .set-color`),r=document.querySelector(`#info-container-${a} .set-size`),s=document.querySelector(`#info-container-${a} .set-period`),t=document.querySelector(`#info-container-${a} .set-angle`),u=document.querySelector(`#info-container-${a} .set-semi-X-axis`),v=document.querySelector(`#info-container-${a} .set-semi-Y-axis`),w=document.querySelector(`#info-container-${a} .set-period-change`),z=document.querySelector(`#info-container-${a} .set-semi-X-axis-change`),A=document.querySelector(`#info-container-${a} .set-semi-Y-axis-change`),B=document.querySelector(`#info-container-${a} .set-angle-change`),C=document.querySelector(`#info-container-${a} .set-rotate-around`),D=document.querySelector(`#info-container-${a} .set-attr-go`),E=document.querySelector(`#info-container-${a} .set-attr-reset`);var F=0,G=0,H=null,I=!1,J=!1,K=0,L=0;b(),window.addEventListener("resize",()=>{F=containerLength/2,j.initSemiX>F&&(j.initSemiX=F),j.initSemiY>F&&(j.initSemiY=F);"ontouchstart"in document.documentElement||(u.value=j.initSemiX,v.value=j.initSemiY)}),s.addEventListener("click",()=>{s.value=j.period(G/1e3)}),u.addEventListener("click",()=>{u.value=j.semiX(G/1e3)}),v.addEventListener("click",()=>{v.value=j.semiY(G/1e3)}),t.addEventListener("click",()=>{t.value=j.rotate(G/1e3)}),C.addEventListener("change",()=>{let a=C.value;I="origin"!=a}),D.addEventListener("click",function(){const a=parseFloat(r.value);if(30>=a&&5<=a)D.style.backgroundColor=q.value,k.style.backgroundColor=q.value,k.style.width=floatToPx(a),k.style.height=floatToPx(a),m.style.backgroundColor=q.value;else return void wrongInput(r);let b=isNaN(parseFloat(s.value)),c=isNaN(parseFloat(t.value))||360<Math.abs(parseFloat(t.value)),d=Math.abs(parseFloat200(u.value))>F,f=Math.abs(parseFloat200(v.value))>F;if(!d&&!f&&!b&&!c)j.initPeriod=parseFloat(s.value),j.initSemiX=parseFloat(u.value),j.initSemiY=parseFloat(v.value),j.initRotate=parseFloat(t.value),s.value=parseFloat(s.value),u.value=parseFloat(u.value),v.value=parseFloat(v.value),t.value=parseFloat(t.value);else return d&&wrongInput(u),f&&wrongInput(v),b&&wrongInput(s),void(c&&wrongInput(t));w.value||(w.value=0),z.value||(z.value=0),A.value||(A.value=0),B.value||(B.value=0);let g=isNaN(parseFloat(w.value)),h=isNaN(parseFloat(B.value))||360<Math.abs(parseFloat(B.value)),i=Math.abs(parseFloat200(z.value))>F,l=Math.abs(parseFloat200(A.value))>F;if(!i&&!l&&!g&&!h){var n=parseFloat(w.value);j.period=a=>j.initPeriod+a*n;var o=parseFloat(z.value);j.semiX=a=>j.initSemiX+a*o;var p=parseFloat(A.value);j.semiY=a=>j.initSemiY+a*p;var x=parseFloat(B.value);j.rotate=a=>j.initRotate+a*x,w.value=n,z.value=o,A.value=p,B.value=x}else return i&&wrongInput(z),l&&wrongInput(A),g&&wrongInput(w),void(h&&wrongInput(B));const y=G/1e3;clearTimeout(H),j.offset-=j.omega(y)*y,G=0,H=setTimeout(e,intervals),D.value="Change!"}),E.addEventListener("click",()=>{clearTimeout(H),j=null,b(null,!1),j=new Block,D.value="Go!",n.value=null,p.value=null});"onmousedown"in document.documentElement&&(k.addEventListener("mousedown",g),container.addEventListener("mousemove",h),container.addEventListener("mouseup",i)),"ontouchstart"in document.documentElement&&(k.addEventListener("touchstart",g),container.addEventListener("touchmove",h),container.addEventListener("touchend",i)),this.cleanUp=function(){clearTimeout(H),j=null}}const setFpsText=document.querySelector(".shared-info-container-bo > span:nth-child(2)");document.querySelector(".shared-info-container-bo .fps-decrease").addEventListener("click",()=>{let a=parseInt(setFpsText.innerText);return 5>=a?void(setFpsText.innerText=5):void(intervals=parseInt(1e3/a),setFpsText.innerText=a-(40<=a?10:5))}),document.querySelector(".shared-info-container-bo .fps-increase").addEventListener("click",()=>{let a=parseInt(setFpsText.innerText);return 150<=a?void(setFpsText.innerText=150):void(intervals=parseInt(1e3/a),setFpsText.innerText=a+(40<=a?10:5))});const grandContainer=document.querySelector(".grand-container"),infoContainer1=document.querySelector("#info-container-1"),movingObj1=document.querySelector("#moving-obj-1"),movingObjTrajectory1=document.querySelector("#moving-obj-trajectory-1"),objManageNode=document.querySelector(".obj-manage"),movingObjProjection1=document.querySelector("#moving-obj-prj-1"),oneClickGoBtn=document.querySelector(".obj-manage .objs-oneclick-go"),oneClickResetBtn=document.querySelector(".obj-manage .objs-oneclick-reset"),oneClickBtnsSeparator=document.querySelector(".obj-manage br");oneClickGoBtn.style.display="none",oneClickResetBtn.style.display="none",oneClickBtnsSeparator.style.display="none";var prevObjSelect=[],nextObjSelect=[],nextBtnHandlers=[],circular1=new BlockInMotion(1),CircularsCount=1,Circulars=[];document.querySelector(".obj-manage .append-objs").addEventListener("click",()=>{if(6<=CircularsCount)return;++CircularsCount;var a=infoContainer1.cloneNode(!0);a.id=`info-container-${CircularsCount}`,a.children[0].children[1].innerText=`Block ${CircularsCount}`,a.style.display="none",grandContainer.insertBefore(a,container);var b=movingObj1.cloneNode(!0);b.id=`moving-obj-${CircularsCount}`,container.appendChild(b);var c=movingObjTrajectory1.cloneNode(!0);c.id=`moving-obj-trajectory-${CircularsCount}`,container.insertBefore(c,origin);var d=movingObjProjection1.cloneNode();d.id=`moving-obj-prj-${CircularsCount}`;var e=document.createElement("div");e.setAttribute("class","projections"),e.appendChild(d),grandContainer.insertBefore(e,objManageNode);var f=new BlockInMotion(CircularsCount);document.querySelector(`#info-container-${CircularsCount} .set-color`).value=`rgba(${Math.floor(256*Math.random())},${Math.floor(256*Math.random())},${Math.floor(256*Math.random())},1)`,Circulars.push(f),2==CircularsCount&&(oneClickGoBtn.style.display="",oneClickResetBtn.style.display="",oneClickBtnsSeparator.style.display="");const g=CircularsCount;document.querySelector(`#info-container-${g} .switch-obj-prev`).addEventListener("click",()=>{document.querySelector(`#info-container-${g}`).style.display="none",document.querySelector(`#info-container-${g-1}`).style.display="grid"}),nextBtnHandlers.push(()=>{document.querySelector(`#info-container-${g-1}`).style.display="none",document.querySelector(`#info-container-${g}`).style.display="grid"}),document.querySelector(`#info-container-${g-1} .switch-obj-next`).addEventListener("click",nextBtnHandlers[g-2])}),document.querySelector(".obj-manage .delete-objs").addEventListener("click",()=>{if(1>=CircularsCount)return;Circulars[Circulars.length-1].cleanUp(),Circulars.pop();const a=document.querySelector(`#info-container-${CircularsCount}`),b=document.querySelector(`#info-container-${CircularsCount-1}`),c="none"!=a.style.display;a.remove(),document.querySelector(`#moving-obj-${CircularsCount}`).remove(),document.querySelector(`#moving-obj-trajectory-${CircularsCount}`).remove(),document.querySelector(`#moving-obj-prj-${CircularsCount}`).parentNode.remove(),document.querySelector(`#info-container-${CircularsCount-1} .switch-obj-next`).removeEventListener("click",nextBtnHandlers.pop()),c&&(b.style.display="grid"),1==--CircularsCount&&(oneClickGoBtn.style.display="none",oneClickResetBtn.style.display="none",oneClickBtnsSeparator.style.display="none")}),document.querySelector(".obj-manage .objs-oneclick-go").addEventListener("click",()=>{var a=document.querySelectorAll(".info-container .set-attr-go");for(let b of a)b.click()}),document.querySelector(".obj-manage .objs-oneclick-reset").addEventListener("click",()=>{var a=document.querySelectorAll(".info-container .set-attr-reset");for(let b of a)b.click()});const samplesClickDisplay=document.querySelector(".samples-display > h5");let samplesShown=!1;samplesClickDisplay.addEventListener("click",()=>{if(!samplesShown){let a=["./assets/uniformcircular1.gif","./assets/uniformcircular2.gif","./assets/uniformcircular3.gif","./assets/uniformcircular4.gif"];for(let b of a){let a=document.createElement("img");a.src=b,document.querySelector(".samples-display").appendChild(a)}}else for(let a of document.querySelectorAll(".samples-display img"))a.remove();samplesShown=!samplesShown});