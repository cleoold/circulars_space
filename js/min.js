/* uniform circular motion demo! ()cleoold*/
const pBody=document.querySelector("body"),pHtml=document.querySelector("html");var bgChangeFlag=-1;(()=>{const a=["#30542c","#232170","#530a80","#870c6d","#873a0b"];let b=0;bgChangeFlag=setTimeout(function c(){5==++b&&(b=0),pBody.style.backgroundColor=a[b],pHtml.style.backgroundColor=a[b],bgChangeFlag&&(bgChangeFlag=setTimeout(c,5e3))},5e3)})(),document.querySelector(".cancel-bg-change").addEventListener("click",function a(){document.querySelector(".cancel-bg-change").removeEventListener("click",a),clearTimeout(bgChangeFlag),bgChangeFlag=null}),document.querySelector(".cancel-bg-change-and-enable-star").addEventListener("click",function a(){document.querySelector(".cancel-bg-change-and-enable-star").removeEventListener("click",a),clearTimeout(bgChangeFlag),bgChangeFlag=null,pBody.style.backgroundColor="unset",pHtml.style.backgroundColor="unset",pHtml.style.background="url(\"./assets/bg.jpg\")",pHtml.style.backgroundPosition="center center",pHtml.style.backgroundAttachment="fixed",document.querySelector("#container").style.backgroundColor="unset";const b=["1px 1px 15px 6px rgba(255,144,61,.89)","1px 1px 15px 6px rgba(255,100,61,.93)","1px 1px 15px 6px rgba(255,88,61,.89)","1px 1px 15px 6px rgba(255,88,61,.5)","1px 1px 15px 6px rgba(255,100,61,.89)","1px 1px 15px 6px rgba(255,144,61,.77)"];let c=0;const d=document.querySelector("#origin");d.style.background="radial-gradient( rgb(255,208,0) 1%, rgb(255,151,0) 39%, rgb(249,183,0) 39%, rgb(223,77,23) 100%)",d.style.width="8px",d.style.height="8px",setTimeout(function a(){6==++c&&(c=0),d.style.boxShadow=b[c],d.style.WebkitBoxShadow=b[c],setTimeout(a,4e3)},0)});const container=document.querySelector("div#container"),containerWidthText=document.querySelector(".container-width"),origin=document.querySelector("div#origin");var containerLength=0;function floatToPx(a){return a+""+"px"}function parseFloat200(a){let b=parseFloat(a);return isNaN(b)?1/0:b}function wrongInput(a){let b=a.style.backgroundColor;a.style.backgroundColor="#c98d8d",setTimeout(()=>{a.style.backgroundColor=b},400)}function onChangeContainerSize(){containerLength=parseFloat(window.getComputedStyle(container).width);var a=floatToPx(containerLength);container.style.height=a,containerWidthText.value=a,origin.style.left=floatToPx(parseFloat(window.getComputedStyle(container).width)/2-3.6),origin.style.top=floatToPx(parseFloat(window.getComputedStyle(container).height)/2-3.5)}onChangeContainerSize(),window.addEventListener("resize",onChangeContainerSize);function degToRadian(a){return Math.PI*a/180}function radianToDeg(a){return 180*a/Math.PI}function rotateX(a,b,c){return Math.cos(c)*a-Math.sin(c)*b}function rotateY(a,b,c){return Math.sin(c)*a+Math.cos(c)*b}function Block(a=0,b=0,c=0,d=0,e=0){this.offset=a,this.initPeriod=b,this.initSemiX=c,this.initSemiY=d,this.initRotate=e,this.period=()=>this.initPeriod,this.omega=a=>2*Math.PI/this.period(a),this.semiX=()=>this.initSemiX,this.semiY=()=>this.initSemiY,this.rotate=()=>this.initRotate,this.yieldX=a=>this.semiX(a)*Math.cos(this.omega(a)*a-this.offset),this.yieldY=a=>this.semiY(a)*Math.sin(this.omega(a)*a-this.offset),this.yieldRotated=a=>{let b=this.yieldX(a),c=this.yieldY(a),d=this.rotate(a),e=degToRadian(d);return{x:rotateX(b,c,e),y:rotateY(b,c,e),rx:this.semiX(a),ry:this.semiY(a),rad:e,deg:d}}}var intervals=40;function BlockInMotion(a){function b(a,b=!0){B=0,A=containerLength/2,n.value=15,p.value=5,r.value=A/2,s.value=A/2,q.value=0,t.value=0,u.value=0,v.value=0,w.value=0,x.value="origin",D=!1,h.style.left="49.1%",h.style.top="48.9%",h.style.width="15px",h.style.height="15px",j.style.left="49.1%",i.style.width="0px",i.style.height="0px",i.style.left="0px",i.style.top="0px",i.style.borderColor="rgba(255,255,255,.18) !important",b&&(m.value="yellow",y.style.backgroundColor="yellow",h.style.backgroundColor="yellow",j.style.backgroundColor="yellow"),C=null}function c(a,b){return a<-containerLength||a>2*containerLength||b<-containerLength||b>2*containerLength}function d(a,b,c){return 0>a||a>containerLength-c||0>b||b>containerLength-1.1*c}function e(){B+=intervals;let a=B/1e3,b=parseFloat(h.style.width),d=A-b/2;const i=g.yieldRotated(a);let m=i.x+d,n=i.y+d;if(D){let a=i.rad;if(Math.abs(i.rx)>=Math.abs(i.ry)){let b=Math.sqrt(i.rx**2-i.ry**2);var o=b*Math.cos(a),q=b*Math.sin(a)}else{let b=Math.sqrt(i.ry**2-i.rx**2);var o=b*Math.sin(-a),q=b*Math.cos(a)}m+=o,n+=q}return c(m,n,b)?(g.initSemiX=A,g.SemiX=()=>g.initSemiX,g.initSemiY=A,g.SemiY=()=>g.initSemiY,g.initPeriod=0,g.period=()=>g.initPeriod,g.rotate=()=>g.initRotate,u.value=0,v.value=0,p.value=0,k.value="stopped",void(l.value="stopped")):void(h.style.left=floatToPx(m),k.value=floatToPx(m),h.style.top=floatToPx(n),l.value=floatToPx(n),j.style.left=floatToPx(m),f(i.rx,i.ry,i.deg),D&&f(i.rx,i.ry,i.deg,o,q),C=setTimeout(e,intervals))}function f(a,b,c,d=0,e=0){a=Math.abs(a),b=Math.abs(b),i.style.width=floatToPx(2*a),i.style.height=floatToPx(2*b);let f=parseFloat(window.getComputedStyle(container).width)/2;i.style.left=floatToPx(f-a+d),i.style.top=floatToPx(f-b+e),i.style.transform=`rotate(${c}deg)`,i.style.WebkitTransform=`rotate(${c}deg)`}var g=new Block;const h=document.querySelector(`div#moving-obj-${a}`),i=document.querySelector(`div#moving-obj-trajectory-${a}`),j=document.querySelector(`div#moving-obj-prj-${a}`),k=document.querySelector(`#info-container-${a} .box-x`),l=document.querySelector(`#info-container-${a} .box-y`),m=document.querySelector(`#info-container-${a} .set-color`),n=document.querySelector(`#info-container-${a} .set-size`),p=document.querySelector(`#info-container-${a} .set-period`),q=document.querySelector(`#info-container-${a} .set-angle`),r=document.querySelector(`#info-container-${a} .set-semi-X-axis`),s=document.querySelector(`#info-container-${a} .set-semi-Y-axis`),t=document.querySelector(`#info-container-${a} .set-period-change`),u=document.querySelector(`#info-container-${a} .set-semi-X-axis-change`),v=document.querySelector(`#info-container-${a} .set-semi-Y-axis-change`),w=document.querySelector(`#info-container-${a} .set-angle-change`),x=document.querySelector(`#info-container-${a} .set-rotate-around`),y=document.querySelector(`#info-container-${a} .set-attr-go`),z=document.querySelector(`#info-container-${a} .set-attr-reset`);var A=0,B=0,C=null,D=!1,E=!1,F=0,G=0;b(),window.addEventListener("resize",()=>{A=containerLength/2,g.initSemiX>A&&(g.initSemiX=A),g.initSemiY>A&&(g.initSemiY=A);"ontouchstart"in document.documentElement||(r.value=g.initSemiX,s.value=g.initSemiY)}),p.addEventListener("click",()=>{p.value=g.period(B/1e3)}),r.addEventListener("click",()=>{r.value=g.semiX(B/1e3)}),s.addEventListener("click",()=>{s.value=g.semiY(B/1e3)}),q.addEventListener("click",()=>{q.value=g.rotate(B/1e3)}),x.addEventListener("change",()=>{let a=x.value;D="origin"!=a}),y.addEventListener("click",function(){const a=parseFloat(n.value);if(30>=a&&5<=a)y.style.backgroundColor=m.value,h.style.backgroundColor=m.value,h.style.width=floatToPx(a),h.style.height=floatToPx(a),j.style.backgroundColor=m.value;else return void wrongInput(n);let b=isNaN(parseFloat(p.value)),c=isNaN(parseFloat(q.value))||360<Math.abs(parseFloat(q.value)),d=Math.abs(parseFloat200(r.value))>A,f=Math.abs(parseFloat200(s.value))>A;if(!d&&!f&&!b&&!c)g.initPeriod=parseFloat(p.value),g.initSemiX=parseFloat(r.value),g.initSemiY=parseFloat(s.value),g.initRotate=parseFloat(q.value),p.value=parseFloat(p.value),r.value=parseFloat(r.value),s.value=parseFloat(s.value),q.value=parseFloat(q.value);else return d&&wrongInput(r),f&&wrongInput(s),b&&wrongInput(p),void(c&&wrongInput(q));t.value||(t.value=0),u.value||(u.value=0),v.value||(v.value=0),w.value||(w.value=0);let i=isNaN(parseFloat(t.value)),k=isNaN(parseFloat(w.value))||360<Math.abs(parseFloat(w.value)),l=Math.abs(parseFloat200(u.value))>A,o=Math.abs(parseFloat200(v.value))>A;if(!l&&!o&&!i&&!k){var x=parseFloat(t.value);g.period=a=>g.initPeriod+a*x;var z=parseFloat(u.value);g.semiX=a=>g.initSemiX+a*z;var D=parseFloat(v.value);g.semiY=a=>g.initSemiY+a*D;var E=parseFloat(w.value);g.rotate=a=>g.initRotate+a*E,t.value=x,u.value=z,v.value=D,w.value=E}else return l&&wrongInput(u),o&&wrongInput(v),i&&wrongInput(t),void(k&&wrongInput(w));const F=B/1e3;clearTimeout(C),g.offset-=g.omega(F)*F,B=0,C=setTimeout(e,intervals),y.value="Change!"}),z.addEventListener("click",()=>{clearTimeout(C),g=null,b(null,!1),g=new Block,y.value="Go!",k.value=null,l.value=null});var H=a=>{a=a||window.event,a.preventDefault(),F=(a.clientX||a.touches[0].clientX)-h.offsetLeft,G=(a.clientY||a.touches[0].clientY)-h.offsetTop,E=!0},I=a=>{if(E){a=a||window.event,a.preventDefault();let b=parseFloat(h.style.width),c=(a.clientX||a.touches[0].clientX)-F,e=(a.clientY||a.touches[0].clientY)-G;if(d(c,e,b))return;h.style.left=floatToPx(c),h.style.top=floatToPx(e),k.value=c,l.value=e,j.style.left=floatToPx(c);let i=c-parseFloat(origin.style.left),m=e-parseFloat(origin.style.top),n=Math.sqrt(i**2+m**2);r.value=n,s.value=n,g.offset=-Math.atan2(m,i),f(n,n,0)}},J=()=>{E=!1,F=0,G=0};"onmousedown"in document.documentElement&&(h.addEventListener("mousedown",H),container.addEventListener("mousemove",I),container.addEventListener("mouseup",J)),"ontouchstart"in document.documentElement&&(h.addEventListener("touchstart",H),container.addEventListener("touchmove",I),container.addEventListener("touchend",J))}const setFpsText=document.querySelector(".shared-info-container-bo > span:nth-child(2)");document.querySelector(".shared-info-container-bo .fps-decrease").addEventListener("click",()=>{let a=parseInt(setFpsText.innerText);return 5>=a?void(setFpsText.innerText=5):void(intervals=parseInt(1e3/a),setFpsText.innerText=a-(40<=a?10:5))}),document.querySelector(".shared-info-container-bo .fps-increase").addEventListener("click",()=>{let a=parseInt(setFpsText.innerText);return 150<=a?void(setFpsText.innerText=150):void(intervals=parseInt(1e3/a),setFpsText.innerText=a+(40<=a?10:5))});const grandContainer=document.querySelector(".grand-container"),infoContainer1=document.querySelector("#info-container-1"),movingObj1=document.querySelector("#moving-obj-1"),movingObjTrajectory1=document.querySelector("#moving-obj-trajectory-1"),objManageNode=document.querySelector(".obj-manage"),movingObjProjection1=document.querySelector("#moving-obj-prj-1"),oneClickGoBtn=document.querySelector(".obj-manage .objs-oneclick-go"),oneClickResetBtn=document.querySelector(".obj-manage .objs-oneclick-reset"),oneClickBtnsSeparator=document.querySelector(".obj-manage br");oneClickGoBtn.style.display="none",oneClickResetBtn.style.display="none",oneClickBtnsSeparator.style.display="none";var prevObjSelect=[],nextObjSelect=[],nextBtnHandlers=[],circular1=new BlockInMotion(1),CircularsCount=1,Circulars=[];document.querySelector(".obj-manage .append-objs").addEventListener("click",()=>{if(6<=CircularsCount)return;++CircularsCount;var a=infoContainer1.cloneNode(!0);a.id=`info-container-${CircularsCount}`,a.children[0].children[1].innerText=`Block ${CircularsCount}`,a.style.display="none",grandContainer.insertBefore(a,container);var b=movingObj1.cloneNode(!0);b.id=`moving-obj-${CircularsCount}`,container.appendChild(b);var c=movingObjTrajectory1.cloneNode(!0);c.id=`moving-obj-trajectory-${CircularsCount}`,container.insertBefore(c,origin);var d=movingObjProjection1.cloneNode();d.id=`moving-obj-prj-${CircularsCount}`;var e=document.createElement("div");e.setAttribute("class","projections"),e.appendChild(d),grandContainer.insertBefore(e,objManageNode);var f=new BlockInMotion(CircularsCount);document.querySelector(`#info-container-${CircularsCount} .set-color`).value=`rgba(${Math.floor(256*Math.random())},${Math.floor(256*Math.random())},${Math.floor(256*Math.random())},1)`,Circulars.push(f),2==CircularsCount&&(oneClickGoBtn.style.display="",oneClickResetBtn.style.display="",oneClickBtnsSeparator.style.display="");const g=CircularsCount;document.querySelector(`#info-container-${g} .switch-obj-prev`).addEventListener("click",()=>{document.querySelector(`#info-container-${g}`).style.display="none",document.querySelector(`#info-container-${g-1}`).style.display="grid"}),nextBtnHandlers.push(()=>{document.querySelector(`#info-container-${g-1}`).style.display="none",document.querySelector(`#info-container-${g}`).style.display="grid"}),document.querySelector(`#info-container-${g-1} .switch-obj-next`).addEventListener("click",nextBtnHandlers[g-2])}),document.querySelector(".obj-manage .delete-objs").addEventListener("click",()=>{if(1>=CircularsCount)return;delete Circulars[Circulars.length-1],Circulars.pop();const a=document.querySelector(`#info-container-${CircularsCount}`),b=document.querySelector(`#info-container-${CircularsCount-1}`),c="none"!=a.style.display;a.remove(),document.querySelector(`#moving-obj-${CircularsCount}`).remove(),document.querySelector(`#moving-obj-trajectory-${CircularsCount}`).remove(),document.querySelector(`#moving-obj-prj-${CircularsCount}`).parentNode.remove(),document.querySelector(`#info-container-${CircularsCount-1} .switch-obj-next`).removeEventListener("click",nextBtnHandlers.pop()),c&&(b.style.display="grid"),1==--CircularsCount&&(oneClickGoBtn.style.display="none",oneClickResetBtn.style.display="none",oneClickBtnsSeparator.style.display="none")}),document.querySelector(".obj-manage .objs-oneclick-go").addEventListener("click",()=>{var a=document.querySelectorAll(".info-container .set-attr-go");for(let b of a)b.click()}),document.querySelector(".obj-manage .objs-oneclick-reset").addEventListener("click",()=>{var a=document.querySelectorAll(".info-container .set-attr-reset");for(let b of a)b.click()});const samplesClickDisplay=document.querySelector(".samples-display > h5");let samplesShown=!1;samplesClickDisplay.addEventListener("click",()=>{if(!samplesShown){let a=["./assets/uniformcircular1.gif","./assets/uniformcircular2.gif","./assets/uniformcircular3.gif","./assets/uniformcircular4.gif"];for(let b of a){let a=document.createElement("img");a.src=b,document.querySelector(".samples-display").appendChild(a)}}else for(let a of document.querySelectorAll(".samples-display img"))a.remove();samplesShown=!samplesShown});