<!DOCTYPE html>

<head>
    <!--uniform circular motion demo! ()cleoold-->

    <title>Circular Motion Demo</title>
    <meta name="description" content="circular motion demo">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css" type="text/css" />
    <link rel="icon" href="./ahp.png" sizes="32x32">
</head>


<body>
    <header>
        <h1><del>Uniform</del> circular motion demo</h1>
    </header>
    <article class="grand-container">
        <div class="shared-info-container">
            <span>container width </span><input type="text" class="container-width" autocomplete="off" readonly />
        </div>
        <div id="info-container-1" class="info-container">
            <h3>Block one</h3>
            <div class="box-label"><span>moving box X-axis</span></div>
            <input type="text" class="box-x" autocomplete="off" placeholder="leave this be :-)" readonly />
            <div class="box-label"><span>moving box Y-axis</span></div>
            <input type="text" class="box-y" autocomplete="off" placeholder="leave this be :-)" readonly />
            <div class="box-label"><span>color</span></div>
            <input type="text" class="set-color" autocomplete="off" />
            <div class="box-label"><span>size(px)</span></div>
            <input type="text" class="set-size" autocomplete="off" />
            <div class="box-label"><span>period(sec)</span></div>
            <input type="text" class="set-period" autocomplete="off" />
            <div class="box-label"><span>radius(px)</span></div>
            <input type="text" class="set-radius" autocomplete="off" />
            <div class="box-label"><span>T Δ(sec/sec)</span></div>
            <input type="text" class="set-period-change" autocomplete="off" />
            <div class="box-label"><span>R Δ(px/sec)</span></div>
            <input type="text" class="set-radius-change" autocomplete="off" />

            <div class="buttons">
                <input type="button" class="set-attr-go" value="Go!" />
                <input type="button" class="set-attr-reset" value="Reset" />
            </div>
        </div>
        <div id="container">
            <div id="moving-obj-trajectory-1" class="moving-obj-trajectory"></div>
            <div id="origin"></div>
            <div id="moving-obj-1" class="moving-obj"></div>
        </div>
        <div class="projections">
            <div id="moving-obj-prj-1" class="moving-obj-prj"></div>
        </div>
        <div class="obj-manage">
            <input type="button" class="objs-oneclick-go" value="One-click go!" />
            <input type="button" class="objs-oneclick-reset" value="One-click reset" />
            <br />
            <input type="button" class="append-objs" value="Append" />
            <input type="button" class="delete-objs" value="Remove" />
        </div>
        <div class="description">
            <p>
                <span class="bold">Tips: </span>In this demonstration, you see a ball rotating around the origin
                (center) of the box. First set the color of the ball: it can be yellow,
                blue, violet or rgba(255,255,255,0.5). Then, set its diameter, which ranges from 5 to 30, inside the
                'size' box. The period is the time taken for the ball
                to complete one complete circle and it should be in seconds. The radius is up to the size of your
                window. <span class="bold">However, </span>don't worry yet, these values are
                automatically filled with default ones so you can just press the 'Go' button to see its motion! This is
                a uniform circular motion.
                <br /><span class="bold">Hint: </span>A negative period gives a counterclockwise motion, try it out!
                <br /><span class="bold">Hint2: </span>you can actually drag the ball to set its initial position!
            </p>
            <p>
                You can vary the period or radius linearly by setting the delta value. For example, by setting R delta
                with 10, the ball's rotating radius will increase
                every second with an amount of 10px, until it hits the boundary. You can try out other fields to see
                what would happen. Of course, in this case the motion
                is not longer a uniform motion.
            </p>
            <p>
                <span class="bold">The principle of this </span> is depicted by a parametric equation with t (time) as
                variable:
                <span class="equation">x(t) = R(t)⋅cos(𝜔(t)⋅t-𝜑) = R(t)⋅cos(2π/T(t)⋅t-𝜑)</span>
                <span class="equation">y(t) = R(t)⋅sin(𝜔(t)⋅t-𝜑) = R(t)⋅sin(2π/T(t)⋅t-𝜑)</span>
                plus the offset correction of the box that contains the ball. Where R is radius and R(t) = R₀+t⋅ΔR, T is
                the period with T(t) = T₀+t⋅ΔT, and 𝜑 is the offset.
            </p>
        </div>
        <hr />
        <div class="shared-info-container-bo">
            <span>frames per second: </span><span>25</span>
            <input type="button" class="fps-decrease" value="decrease" />
            <input type="button" class="fps-increase" value="increase" />
            <br /><br />
            <input type="button" class="cancel-bg-change" value="pause background" />
        </div>
    </article>
    <footer>
        <br />
        Still working in progress!? (c) 2019 cleooldsaty. Report bug: <a
            href="https://github.com/cleoold/uniform_circular_motion" target="_blank">Github</a>
    </footer>
</body>

<script src="./js/bg.js"></script>
<script src="./js/movingbox.js"></script>

<script>
    const grandContainer = document.querySelector('.grand-container');
    const infoContainer1 = document.querySelector('#info-container-1');
    const movingObj1 = document.querySelector('#moving-obj-1');
    const movingObjTrajectory1 = document.querySelector('#moving-obj-trajectory-1');
    const objManageNode = document.querySelector('.obj-manage');
    const movingObjProjection1 = document.querySelector('#moving-obj-prj-1');

    const oneClickGoBtn = document.querySelector('.obj-manage .objs-oneclick-go');
    const oneClickResetBtn = document.querySelector('.obj-manage .objs-oneclick-reset');
    const oneClickBtnsSeparator = document.querySelector('.obj-manage br');

    var circular1 = new BlockInMotion('1');

    // manage multiple circulations (max 1+5=6)
    var CircularsCount = 1;
    var Circulars = new Array();

    document.querySelector('.obj-manage .append-objs').addEventListener('click', (e) => {
        if (CircularsCount >= 6) return;
        ++CircularsCount;

        // create nodes
        var clonedInfoContainer = infoContainer1.cloneNode(true);
        clonedInfoContainer.id = `info-container-${CircularsCount}`;
        clonedInfoContainer.children[0].innerText = `Block ${CircularsCount}`;
        grandContainer.insertBefore(clonedInfoContainer, container);

        var clonedMovingObj = movingObj1.cloneNode(true);
        clonedMovingObj.id = `moving-obj-${CircularsCount}`;
        container.appendChild(clonedMovingObj);

        var clonedMovingObjTrajectory = movingObjTrajectory1.cloneNode(true);
        clonedMovingObjTrajectory.id = `moving-obj-trajectory-${CircularsCount}`;
        container.insertBefore(clonedMovingObjTrajectory, origin);

        var clonedMovingObjProjection = movingObjProjection1.cloneNode();
        clonedMovingObjProjection.id = `moving-obj-prj-${CircularsCount}`;
        var clonedMovingObjProjectionContainer = document.createElement('div');
        clonedMovingObjProjectionContainer.setAttribute('class', 'projections');
        clonedMovingObjProjectionContainer.appendChild(clonedMovingObjProjection);
        grandContainer.insertBefore(clonedMovingObjProjectionContainer, objManageNode);

        // create moving block js objects
        var bl = new BlockInMotion(CircularsCount);
        document.querySelector(`#info-container-${CircularsCount} .set-color`).value = 
            `rgba(${Math.floor(Math.random()*256)},${Math.floor(Math.random()*256)},${Math.floor(Math.random()*256)},1)`;
        Circulars.push(bl);

        // displays the multi-ball control buttons
        oneClickGoBtn.style.display = 'unset';
        oneClickResetBtn.style.display = 'unset';
        oneClickBtnsSeparator.style.display = 'unset';
        window.scrollBy(0, 299);
    });

    document.querySelector('.obj-manage .delete-objs').addEventListener('click', (e) => {
        if (CircularsCount <= 1) return;
        // remove js objects
        delete Circulars[Circulars.length-1];
        Circulars.pop();

        // remove nodes
        document.querySelector(`#info-container-${CircularsCount}`).remove();
        document.querySelector(`#moving-obj-${CircularsCount}`).remove();
        document.querySelector(`#moving-obj-trajectory-${CircularsCount}`).remove();
        document.querySelector(`#moving-obj-prj-${CircularsCount}`).parentNode.remove()

        if (--CircularsCount == 1) {
            // hides the multi-ball control buttons
            oneClickGoBtn.style.display = 'none';
            oneClickResetBtn.style.display = 'none';
            oneClickBtnsSeparator.style.display = 'none';
        }
        window.scrollBy(0, -299);
    });

    document.querySelector('.obj-manage .objs-oneclick-go').addEventListener('click', (e) => {
        var btns = document.querySelectorAll('.info-container .set-attr-go');
        for (each of btns) each.click();
    });

    document.querySelector('.obj-manage .objs-oneclick-reset').addEventListener('click', (e) => {
        var btns = document.querySelectorAll('.info-container .set-attr-reset');
        for (each of btns) each.click();
    });
</script>